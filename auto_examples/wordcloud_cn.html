

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>create wordcloud with chinese &mdash; wordcloud 1.6.0.post50+g73bbe47 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/wordcloud.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Colored by Group Example" href="colored_by_group.html" />
    <link rel="prev" title="Image-colored wordcloud with boundary map" href="parrot.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> wordcloud
          

          
          </a>

          
            
            
              <div class="version">
                1.6.0.post50+g73bbe47
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../references.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Gallery of Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="single_word.html">Single Word</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple.html">Minimal Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="masked.html">Masked wordcloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="frequency.html">Using frequency</a></li>
<li class="toctree-l2"><a class="reference internal" href="colored.html">Image-colored wordcloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="emoji.html">Emoji Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="a_new_hope.html">Using custom colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="parrot.html">Image-colored wordcloud with boundary map</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">create wordcloud with chinese</a></li>
<li class="toctree-l2"><a class="reference internal" href="colored_by_group.html">Colored by Group Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributor Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../make_a_release.html">Making a release</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">wordcloud</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Gallery of Examples</a> &raquo;</li>
        
      <li>create wordcloud with chinese</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/auto_examples/wordcloud_cn.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-wordcloud-cn-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="create-wordcloud-with-chinese">
<span id="sphx-glr-auto-examples-wordcloud-cn-py"></span><h1>create wordcloud with chinese<a class="headerlink" href="#create-wordcloud-with-chinese" title="Permalink to this headline">¶</a></h1>
<p>Wordcloud is a very good tool, but if you want to create
Chinese wordcloud only wordcloud is not enough. The file
shows how to use wordcloud with Chinese. First, you need a
Chinese word segmentation library jieba, jieba is now the
most elegant the most popular Chinese word segmentation tool in python.
You can use ‘PIP install jieba’. To install it. As you can see,
at the same time using wordcloud with jieba very convenient</p>
<ul class="sphx-glr-horizontal">
<li><img alt="../_images/sphx_glr_wordcloud_cn_001.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_wordcloud_cn_001.png" />
</li>
<li><img alt="../_images/sphx_glr_wordcloud_cn_002.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_wordcloud_cn_002.png" />
</li>
</ul>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Building prefix dict from the default dictionary ...
Dumping model to file cache /tmp/jieba.cache
Loading model cost 1.307 seconds.
Prefix dict has been built successfully.

&lt;wordcloud.wordcloud.WordCloud object at 0x7ff0df081f98&gt;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jieba</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">enable_parallel</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># Setting up parallel processes :4 ,but unable to run on Windows</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">imageio</span> <span class="kn">import</span> <span class="n">imread</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="c1"># jieba.load_userdict(&quot;txt\userdict.txt&quot;)</span>
<span class="c1"># add userdict by load_userdict()</span>
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class"><span class="n">WordCloud</span></a><span class="p">,</span> <a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="wordcloud.ImageColorGenerator" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class"><span class="n">ImageColorGenerator</span></a>

<span class="c1"># get data directory (using getcwd() is needed to support running example in generated IPython notebook)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;__file__&quot;</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span> <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="n">stopwords_path</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/stopwords_cn_en.txt&#39;</span>
<span class="c1"># Chinese fonts must be set</span>
<span class="n">font_path</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/fonts/SourceHanSerif/SourceHanSerifK-Light.otf&#39;</span>

<span class="c1"># the path to save worldcloud</span>
<span class="n">imgname1</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/LuXun.jpg&#39;</span>
<span class="n">imgname2</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/LuXun_colored.jpg&#39;</span>
<span class="c1"># read the mask / color image taken from</span>
<span class="n">back_coloring</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/LuXun_color.jpg&#39;</span><span class="p">))</span>

<span class="c1"># Read the whole text.</span>
<span class="n">text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/CalltoArms.txt&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># if you want use wordCloud,you need it</span>
<span class="c1"># add userdict by add_word()</span>
<span class="n">userdict_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;阿Ｑ&#39;</span><span class="p">,</span> <span class="s1">&#39;孔乙己&#39;</span><span class="p">,</span> <span class="s1">&#39;单四嫂子&#39;</span><span class="p">]</span>


<span class="c1"># The function for processing text with Jieba</span>
<span class="k">def</span> <span class="nf">jieba_processing_txt</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">userdict_list</span><span class="p">:</span>
        <span class="n">jieba</span><span class="o">.</span><span class="n">add_word</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

    <span class="n">mywordlist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">seg_list</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">liststr</span> <span class="o">=</span> <span class="s2">&quot;/ &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">seg_list</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">stopwords_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_stop</span><span class="p">:</span>
        <span class="n">f_stop_text</span> <span class="o">=</span> <span class="n">f_stop</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f_stop_seg_list</span> <span class="o">=</span> <span class="n">f_stop_text</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">myword</span> <span class="ow">in</span> <span class="n">liststr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">myword</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="ow">in</span> <span class="n">f_stop_seg_list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">myword</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">mywordlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myword</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mywordlist</span><span class="p">)</span>


<a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">wc</span></a> <span class="o">=</span> <a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class"><span class="n">WordCloud</span></a><span class="p">(</span><span class="n">font_path</span><span class="o">=</span><span class="n">font_path</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">max_words</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">back_coloring</span><span class="p">,</span>
               <span class="n">max_font_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">860</span><span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="mi">2</span><span class="p">,)</span>


<a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">wc</span></a><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">jieba_processing_txt</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

<span class="c1"># create coloring from image</span>
<a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="wordcloud.ImageColorGenerator" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">image_colors_default</span></a> <span class="o">=</span> <a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="wordcloud.ImageColorGenerator" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class"><span class="n">ImageColorGenerator</span></a><span class="p">(</span><span class="n">back_coloring</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="c1"># recolor wordcloud and show</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">wc</span></a><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># save wordcloud</span>
<a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">wc</span></a><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">imgname1</span><span class="p">))</span>

<span class="c1"># create coloring from image</span>
<a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="wordcloud.ImageColorGenerator" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">image_colors_byImg</span></a> <span class="o">=</span> <a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="wordcloud.ImageColorGenerator" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class"><span class="n">ImageColorGenerator</span></a><span class="p">(</span><span class="n">back_coloring</span><span class="p">)</span>

<span class="c1"># show</span>
<span class="c1"># we could also give color_func=image_colors directly in the constructor</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">wc</span></a><span class="o">.</span><span class="n">recolor</span><span class="p">(</span><span class="n">color_func</span><span class="o">=</span><a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="wordcloud.ImageColorGenerator" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">image_colors_byImg</span></a><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">back_coloring</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># save wordcloud</span>
<a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="wordcloud.WordCloud" class="sphx-glr-backref-module-wordcloud sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">wc</span></a><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">imgname2</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  13.496 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-wordcloud-cn-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/a3275a073a46b8a36d4beef3d79826a3/wordcloud_cn.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">wordcloud_cn.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/33e9162504d7de3e9cfe155cf2cc58b4/wordcloud_cn.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">wordcloud_cn.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="colored_by_group.html" class="btn btn-neutral float-right" title="Colored by Group Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="parrot.html" class="btn btn-neutral float-left" title="Image-colored wordcloud with boundary map" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Andreas Mueller

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>